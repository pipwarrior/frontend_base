{"ast":null,"code":"export const checkLoggedIn = async () => {\n  let token = localStorage.getItem('auth-token');\n\n  if (token === null) {\n    localStorage.setItem('auth-token', '');\n    token = '';\n  } // Use this to check token timer\n\n\n  const tokenRes = await axios.post('http://localhost:3030/api/auth/tokenIsValid', null, {\n    headers: {\n      'auth-token': token\n    }\n  });\n\n  if (tokenRes.data) {\n    const userRes = await axios.get('http://localhost:3030/api/users', {\n      headers: {\n        'auth-token': token\n      }\n    });\n    console.log(userRes);\n    setUserData({\n      token: token,\n      accountType: userRes.data.accountType,\n      username: userRes.data.username,\n      fullName: userRes.data.fullName\n    });\n  }\n};","map":{"version":3,"sources":["/Users/yapfengwei/Desktop/MyApplications/sample3_frontend/src/Pages/auth/auth.js"],"names":["checkLoggedIn","token","localStorage","getItem","setItem","tokenRes","axios","post","headers","data","userRes","get","console","log","setUserData","accountType","username","fullName"],"mappings":"AAAA,OAAO,MAAMA,aAAa,GAAG,YAAY;AACvC,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAZ;;AACA,MAAGF,KAAK,KAAK,IAAb,EAAmB;AACjBC,IAAAA,YAAY,CAACE,OAAb,CAAqB,YAArB,EAAkC,EAAlC;AACAH,IAAAA,KAAK,GAAC,EAAN;AACD,GALsC,CAOvC;;;AACA,QAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAN,CACrB,6CADqB,EAErB,IAFqB,EAGrB;AAACC,IAAAA,OAAO,EAAE;AAAC,oBAAcP;AAAf;AAAV,GAHqB,CAAvB;;AAMA,MAAGI,QAAQ,CAACI,IAAZ,EAAiB;AACf,UAAMC,OAAO,GAAG,MAAMJ,KAAK,CAACK,GAAN,CAAU,iCAAV,EAA6C;AAACH,MAAAA,OAAO,EAAE;AAAC,sBAAcP;AAAf;AAAV,KAA7C,CAAtB;AACAW,IAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACAI,IAAAA,WAAW,CAAC;AACVb,MAAAA,KAAK,EAAEA,KADG;AAEVc,MAAAA,WAAW,EAAEL,OAAO,CAACD,IAAR,CAAaM,WAFhB;AAGVC,MAAAA,QAAQ,EAAEN,OAAO,CAACD,IAAR,CAAaO,QAHb;AAIVC,MAAAA,QAAQ,EAAEP,OAAO,CAACD,IAAR,CAAaQ;AAJb,KAAD,CAAX;AAMD;AACF,CAxBM","sourcesContent":["export const checkLoggedIn = async () => {\n  let token = localStorage.getItem('auth-token');\n  if(token === null) {\n    localStorage.setItem('auth-token','');\n    token='';\n  }\n\n  // Use this to check token timer\n  const tokenRes = await axios.post(\n    'http://localhost:3030/api/auth/tokenIsValid',\n    null,\n    {headers: {'auth-token': token}}\n  )\n\n  if(tokenRes.data){\n    const userRes = await axios.get('http://localhost:3030/api/users', {headers: {'auth-token': token}});\n    console.log(userRes);\n    setUserData({\n      token: token,\n      accountType: userRes.data.accountType,\n      username: userRes.data.username,\n      fullName: userRes.data.fullName\n    })\n  }\n}"]},"metadata":{},"sourceType":"module"}
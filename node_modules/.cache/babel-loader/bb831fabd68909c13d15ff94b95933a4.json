{"ast":null,"code":"var _jsxFileName = \"/Users/yapfengwei/Desktop/MyApplications/sample3_frontend/src/Pages/auth/login.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport FormText from '../../Components/FormComponents/FormText';\nimport FormSubmitButton from '../../Components/FormComponents/FormSubmitButton';\nimport { makeStyles, Card, CardContent, Typography } from '@material-ui/core';\nimport UserContext from '../../context/UserContext';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nconst useStyles = makeStyles({\n  root: {\n    minWidth: '300px',\n    width: '60%',\n    margin: 'auto',\n    marginTop: '10%'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nconst Login = () => {\n  const history = useHistory();\n  const {\n    setUserData\n  } = useContext(UserContext);\n  const classes = useStyles();\n\n  const handleSubmit = async values => {\n    await axios({\n      method: 'post',\n      url: 'http://localhost:3030/api/auth/login',\n      data: values\n    }).then(function (loginRes) {\n      if (loginRes.data.error) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error!',\n          text: loginRes.data.error,\n          confirmButtonText: 'Ok'\n        });\n      } else {\n        setUserData({\n          token: loginRes.data.token,\n          accountType: loginRes.data.user.accountType,\n          username: loginRes.data.user.username,\n          fullName: loginRes.data.user.fullName\n        });\n        localStorage.setItem('auth-token', loginRes.data.token);\n        localStorage.setItem('accountType', loginRes.data.user.accountType);\n        history.push('/catalog');\n      }\n    }).catch(function (err) {\n      let errMessage = err;\n      Swal.fire({\n        icon: 'error',\n        title: 'Something went wrong..',\n        text: errMessage,\n        confirmButtonText: 'Ok'\n      });\n    });\n  };\n\n  const initialValues = {\n    username: '',\n    password: ''\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    component: \"h2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"My catalog\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Formik, {\n    initialValues: initialValues,\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, values =>\n  /*#__PURE__*/\n  // handleChange,\n  React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Field, {\n    title: \"Username\",\n    name: \"username\",\n    type: \"text\",\n    component: FormText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Field, {\n    title: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    component: FormText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(FormSubmitButton, {\n    width: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/yapfengwei/Desktop/MyApplications/sample3_frontend/src/Pages/auth/login.js"],"names":["React","useContext","useEffect","Formik","Form","Field","FormText","FormSubmitButton","makeStyles","Card","CardContent","Typography","UserContext","useHistory","axios","Swal","useStyles","root","minWidth","width","margin","marginTop","bullet","display","transform","title","fontSize","pos","marginBottom","Login","history","setUserData","classes","handleSubmit","values","method","url","data","then","loginRes","error","fire","icon","text","confirmButtonText","token","accountType","user","username","fullName","localStorage","setItem","push","catch","err","errMessage","initialValues","password"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport FormText from '../../Components/FormComponents/FormText';\nimport FormSubmitButton from '../../Components/FormComponents/FormSubmitButton';\nimport { makeStyles, Card, CardContent, Typography } from '@material-ui/core';\nimport UserContext from '../../context/UserContext';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport Swal from 'sweetalert2'\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: '300px',\n    width: '60%',\n    margin: 'auto',\n    marginTop: '10%',\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n});\n\nconst Login = () => {\n  const history = useHistory();\n  const { setUserData } = useContext(UserContext);\n  const classes = useStyles();\n  \n  const handleSubmit = async (values) => {\n    await axios({\n      method:'post',\n      url: 'http://localhost:3030/api/auth/login',\n      data: values\n    }).then(function(loginRes){\n      if(loginRes.data.error) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error!',\n          text: loginRes.data.error,\n          confirmButtonText: 'Ok'\n        })\n       } else {\n        setUserData({\n          token: loginRes.data.token,\n          accountType: loginRes.data.user.accountType,\n          username: loginRes.data.user.username,\n          fullName: loginRes.data.user.fullName\n        })\n        localStorage.setItem('auth-token', loginRes.data.token);\n        localStorage.setItem('accountType', loginRes.data.user.accountType);\n        history.push('/catalog');\n       }\n    }).catch(function(err){\n      let errMessage = err;\n      Swal.fire({\n        icon: 'error',\n        title: 'Something went wrong..',\n        text: errMessage,\n        confirmButtonText: 'Ok'\n      })\n    })\n  }\n\n  const initialValues = {\n    username: '',\n    password: ''\n  }\n\n  return (\n    <div className={classes.root}>\n      <Card variant=\"outlined\">\n        <CardContent>\n          <Typography variant=\"h5\" component=\"h2\" gutterBottom>My catalog</Typography>\n          <Typography variant=\"body2\" component=\"p\">Login</Typography>\n          <Formik\n            initialValues={initialValues}\n            onSubmit={handleSubmit}\n          >\n            {(\n              values,\n              // handleChange,\n              ) => (\n                <Form>\n                  <Field\n                    title=\"Username\"\n                    name=\"username\"\n                    type=\"text\"\n                    component={FormText}\n                  />\n                  <Field\n                    title=\"Password\"\n                    name=\"password\"\n                    type=\"password\"\n                    component={FormText}\n                  />\n                  <FormSubmitButton\n                    width={100}\n                  />\n                </Form>\n              )}\n          </Formik>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"/Users/yapfengwei/Desktop/MyApplications/catalogProject_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Link,useHistory}from'react-router-dom';import UserContext from'../../context/UserContext';import{makeStyles,Menu,MenuItem}from'@material-ui/core';import IconButton from'@material-ui/core/IconButton';import MoreVertIcon from'@material-ui/icons/MoreVert';import axios from'axios';import Swal from'sweetalert2';var useStyles=makeStyles(function(theme){return{linkDecoration:{textDecoration:'inherit',color:'inherit'}};});var CatalogOptions=function CatalogOptions(_ref){var selectedItem=_ref.selectedItem;var classes=useStyles();var _useContext=useContext(UserContext),userData=_useContext.userData;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var history=useHistory();var handleMoreIconClicked=function handleMoreIconClicked(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var handleDelete=function handleDelete(){setAnchorEl(null);axios({method:'delete',url:process.env.REACT_APP_API+'/api/inventory',data:selectedItem,headers:{'auth-token':localStorage.getItem('auth-token')}}).then(function(deletedInventory){console.log(deletedInventory);if(deletedInventory.data.message===\"Successfully deleted\"){Swal.fire({icon:'success',title:'Success!',showConfirmButton:false,timer:1500}).then(function(){history.go(0);});}else{Swal.fire({icon:'error',title:'Error!',text:deletedInventory.data.error,confirmButtonText:'Ok'});}}).catch(function(err){console.log(err);});};if(userData.accountType!=='Admin'){return/*#__PURE__*/React.createElement(React.Fragment,null);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"settings\",onClick:handleMoreIconClicked},/*#__PURE__*/React.createElement(MoreVertIcon,null)),/*#__PURE__*/React.createElement(Menu,{id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/catalog/form\",selectedItem:selectedItem,isEdit:true},className:classes.linkDecoration},/*#__PURE__*/React.createElement(MenuItem,{onClick:handleClose},\"Edit\")),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleDelete},\"Delete\")));};export default CatalogOptions;","map":{"version":3,"sources":["/Users/yapfengwei/Desktop/MyApplications/catalogProject_frontend/src/Pages/Catalog/CatalogOptions.js"],"names":["React","useState","useContext","Link","useHistory","UserContext","makeStyles","Menu","MenuItem","IconButton","MoreVertIcon","axios","Swal","useStyles","theme","linkDecoration","textDecoration","color","CatalogOptions","selectedItem","classes","userData","anchorEl","setAnchorEl","history","handleMoreIconClicked","event","currentTarget","handleClose","handleDelete","method","url","process","env","REACT_APP_API","data","headers","localStorage","getItem","then","deletedInventory","console","log","message","fire","icon","title","showConfirmButton","timer","go","text","error","confirmButtonText","catch","err","accountType","Boolean","pathname","isEdit"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport UserContext from '../../context/UserContext';\nimport { makeStyles, Menu, MenuItem  } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport axios from 'axios';\nimport Swal from 'sweetalert2'\n\nconst useStyles = makeStyles((theme) => ({\n  linkDecoration: {\n    textDecoration: 'inherit',\n    color: 'inherit',\n  },\n}));\n\nconst CatalogOptions = ({selectedItem}) => {\n  const classes = useStyles();\n  const { userData } = useContext(UserContext);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const history = useHistory();\n\n  const handleMoreIconClicked = (event) => {\n    setAnchorEl(event.currentTarget);\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleDelete = () => {\n    setAnchorEl(null);\n    axios({\n      method:'delete',\n      url: process.env.REACT_APP_API+'/api/inventory',\n      data: selectedItem,\n      headers: {'auth-token': localStorage.getItem('auth-token')}\n    }).then(function(deletedInventory){\n      console.log(deletedInventory);\n      if (deletedInventory.data.message === \"Successfully deleted\") {\n        Swal.fire({\n          icon: 'success',\n          title: 'Success!',\n          showConfirmButton: false,\n          timer: 1500\n        }).then(function(){\n          history.go(0);\n        })\n      } else {\n        Swal.fire({\n          icon: 'error',\n          title: 'Error!',\n          text: deletedInventory.data.error,\n          confirmButtonText: 'Ok'\n        })\n      }\n    }).catch(function(err){\n      console.log(err);\n    })\n  }\n\n  if (userData.accountType !== 'Admin') {\n    return <></>\n  }\n\n  return (\n    <>\n      <IconButton aria-label=\"settings\" onClick={handleMoreIconClicked}>\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <Link \n          to={{\n            pathname:\"/catalog/form\",\n            selectedItem: selectedItem,\n            isEdit: true\n          }} \n          className={classes.linkDecoration}\n        >\n          <MenuItem onClick={handleClose}>\n            Edit\n          </MenuItem>\n        </Link>\n        <MenuItem onClick={handleDelete}>Delete</MenuItem>\n      </Menu>\n    </>\n  )\n}\n\nexport default CatalogOptions;\n"]},"metadata":{},"sourceType":"module"}
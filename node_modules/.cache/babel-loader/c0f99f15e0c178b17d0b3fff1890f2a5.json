{"ast":null,"code":"import React from'react';import{makeStyles,Button,Card,CardHeader,CardContent}from'@material-ui/core';import{useHistory}from\"react-router-dom\";import{Formik,Form,Field}from'formik';import FormText from'../../Components/FormComponents/FormText';import FormTextMulti from'../../Components/FormComponents/FormTextMulti';import FormSubmitButton from'../../Components/FormComponents/FormSubmitButton';import axios from'axios';import Swal from'sweetalert2';var useStyles=makeStyles(function(theme){return{root:{backgroundColor:'#F5F5F5'},backButton:{margin:'10px 0px 0px 10px'},cardRoot:{margin:'10px',boxShadow:'0px 0px 3px 0px rgba(0,0,0,0.6)'}};});var CatalogForm=function CatalogForm(props){var showRedirect=props.location.selectedItem;var isEdit=props.location.isEdit;var history=useHistory();var classes=useStyles();var handleSubmit=function handleSubmit(values){if(!isEdit){axios({method:'post',url:process.env.REACT_APP_API+'/api/inventory',data:values,headers:{'auth-token':localStorage.getItem('auth-token')}}).then(function(newCatalogItem){if(newCatalogItem.data.errors){Swal.fire({icon:'error',title:'Error!',text:newCatalogItem.data.error,confirmButtonText:'Ok'});}else{Swal.fire({icon:'success',title:'Success!',showConfirmButton:false,timer:1500}).then(function(){history.push({pathname:'/catalog',selectedItem:newCatalogItem.data});});}}).catch(function(err){var errMessage=err;Swal.fire({icon:'error',title:'Something went wrong..',text:errMessage,confirmButtonText:'Ok'});});}else{values._id=showRedirect._id;axios({method:'patch',url:process.env.REACT_APP_API+'/api/inventory',data:values,headers:{'auth-token':localStorage.getItem('auth-token')}}).then(function(updatedCatalogItem){if(updatedCatalogItem.data.errors){Swal.fire({icon:'error',title:'Error!',text:updatedCatalogItem.data.error,confirmButtonText:'Ok'});}else{Swal.fire({icon:'success',title:'Success!',showConfirmButton:false,timer:1500}).then(function(){history.push({pathname:'/catalog',selectedItem:updatedCatalogItem.data});});}}).catch(function(err){var errMessage=err;Swal.fire({icon:'error',title:'Something went wrong..',text:errMessage,confirmButtonText:'Ok'});});}};var formTitle='Add new item to catalog';if(isEdit){formTitle='Edit catalog item';}var initialValues={// _id: isEdit && showRedirect ? showRedirect._id : '' ,\npartNumber:isEdit&&showRedirect?showRedirect.partNumber:[],description:isEdit&&showRedirect?showRedirect.description:'',brand:isEdit&&showRedirect?showRedirect.brand:'',category:isEdit&&showRedirect?showRedirect.category:''};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Button,{className:classes.backButton,variant:\"contained\",color:\"primary\",onClick:function onClick(){history.push({pathname:'/catalog',selectedItem:showRedirect});}},\"Back\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,{className:classes.cardRoot},/*#__PURE__*/React.createElement(CardHeader,{title:formTitle}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,onSubmit:handleSubmit},function(handleChange){return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Field,{title:\"Part number\",name:\"partNumber\",handleChange:handleChange,component:FormTextMulti}),/*#__PURE__*/React.createElement(Field,{title:\"Description\",name:\"description\",type:\"text\",component:FormText}),/*#__PURE__*/React.createElement(Field,{title:\"Brand\",name:\"brand\",type:\"text\",component:FormText}),/*#__PURE__*/React.createElement(Field,{title:\"Category\",name:\"category\",type:\"text\",component:FormText}),/*#__PURE__*/React.createElement(FormSubmitButton,null));})))));};export default CatalogForm;","map":{"version":3,"sources":["/Users/yapfengwei/Desktop/MyApplications/catalogProject_frontend/src/Pages/Catalog/CatalogForm.js"],"names":["React","makeStyles","Button","Card","CardHeader","CardContent","useHistory","Formik","Form","Field","FormText","FormTextMulti","FormSubmitButton","axios","Swal","useStyles","theme","root","backgroundColor","backButton","margin","cardRoot","boxShadow","CatalogForm","props","showRedirect","location","selectedItem","isEdit","history","classes","handleSubmit","values","method","url","process","env","REACT_APP_API","data","headers","localStorage","getItem","then","newCatalogItem","errors","fire","icon","title","text","error","confirmButtonText","showConfirmButton","timer","push","pathname","catch","err","errMessage","_id","updatedCatalogItem","formTitle","initialValues","partNumber","description","brand","category","handleChange"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles, Button, Card, CardHeader, CardContent } from '@material-ui/core';\nimport { useHistory } from \"react-router-dom\";\nimport { Formik, Form, Field } from 'formik';\nimport FormText from '../../Components/FormComponents/FormText';\nimport FormTextMulti from '../../Components/FormComponents/FormTextMulti';\nimport FormSubmitButton from '../../Components/FormComponents/FormSubmitButton';\nimport axios from 'axios';\nimport Swal from 'sweetalert2'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: '#F5F5F5',\n  },\n  backButton: {\n    margin: '10px 0px 0px 10px'\n  },\n  cardRoot: {\n    margin: '10px',\n    boxShadow: '0px 0px 3px 0px rgba(0,0,0,0.6)',\n  },\n}))\n\nconst CatalogForm = (props) => {\n  const showRedirect = props.location.selectedItem;\n  const isEdit = props.location.isEdit;\n  const history = useHistory();\n  const classes = useStyles();\n\n  const handleSubmit = (values) => {\n    if (!isEdit) {\n      axios({\n        method: 'post',\n        url: process.env.REACT_APP_API+'/api/inventory',\n        data: values,\n        headers: {'auth-token': localStorage.getItem('auth-token')}\n      }).then(function(newCatalogItem){\n        if (newCatalogItem.data.errors) {\n          Swal.fire({\n            icon: 'error',\n            title: 'Error!',\n            text: newCatalogItem.data.error,\n            confirmButtonText: 'Ok'\n          })\n        } else {\n          Swal.fire({\n            icon: 'success',\n            title: 'Success!',\n            showConfirmButton: false,\n            timer: 1500\n          }).then(function(){\n            history.push({\n              pathname: '/catalog',\n              selectedItem: newCatalogItem.data\n            });\n          })\n        }\n      }).catch(function(err){\n        let errMessage = err;\n        Swal.fire({\n          icon: 'error',\n          title: 'Something went wrong..',\n          text: errMessage,\n          confirmButtonText: 'Ok'\n        })\n      })\n    } else {\n      values._id = showRedirect._id;\n      axios({\n        method: 'patch',\n        url: process.env.REACT_APP_API+'/api/inventory',\n        data: values,\n        headers: {'auth-token': localStorage.getItem('auth-token')}\n      }).then(function(updatedCatalogItem){\n        if (updatedCatalogItem.data.errors) {\n          Swal.fire({\n            icon: 'error',\n            title: 'Error!',\n            text: updatedCatalogItem.data.error,\n            confirmButtonText: 'Ok'\n          })\n        } else {\n          Swal.fire({\n            icon: 'success',\n            title: 'Success!',\n            showConfirmButton: false,\n            timer: 1500\n          }).then(function(){\n            history.push({\n              pathname: '/catalog',\n              selectedItem: updatedCatalogItem.data\n            });\n          })\n        }\n      }).catch(function(err){\n        let errMessage = err;\n        Swal.fire({\n          icon: 'error',\n          title: 'Something went wrong..',\n          text: errMessage,\n          confirmButtonText: 'Ok'\n        })\n      })\n    }\n  }\n\n  let formTitle = 'Add new item to catalog'\n  if (isEdit) {\n    formTitle = 'Edit catalog item'\n  }\n\n  var initialValues = {\n    // _id: isEdit && showRedirect ? showRedirect._id : '' ,\n    partNumber: isEdit && showRedirect ? showRedirect.partNumber : [] ,\n    description: isEdit && showRedirect ? showRedirect.description : '',\n    brand: isEdit && showRedirect ? showRedirect.brand : '',\n    category: isEdit && showRedirect ? showRedirect.category : ''\n  }\n\n  return (\n    <div className={classes.root}>\n      <Button \n        className={classes.backButton}\n        variant=\"contained\" \n        color=\"primary\" \n        onClick={() => {\n          history.push({\n            pathname: '/catalog',\n            selectedItem: showRedirect\n          });\n        }}\n      >\n        Back\n      </Button>\n      <div>\n        <Card className={classes.cardRoot}>\n          <CardHeader \n            title={formTitle}\n          />\n          <CardContent>\n            <Formik\n              initialValues={initialValues}\n              onSubmit={handleSubmit}\n            >\n              {(\n                handleChange,\n              ) => (\n                <Form>\n                  <Field \n                    title=\"Part number\"\n                    name=\"partNumber\"\n                    handleChange={handleChange}\n                    component={FormTextMulti}\n                  />\n                  <Field\n                    title=\"Description\"\n                    name=\"description\"\n                    type=\"text\"\n                    component={FormText}\n                  />\n                  <Field\n                    title=\"Brand\"\n                    name=\"brand\"\n                    type=\"text\"\n                    component={FormText}\n                  />\n                  <Field\n                    title=\"Category\"\n                    name=\"category\"\n                    type=\"text\"\n                    component={FormText}\n                  />\n                  <FormSubmitButton />\n                </Form>\n              )}\n            </Formik>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n\nexport default CatalogForm;\n"]},"metadata":{},"sourceType":"module"}